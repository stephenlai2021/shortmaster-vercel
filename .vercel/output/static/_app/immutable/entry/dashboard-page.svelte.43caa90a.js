import{S as ne,i as ie,s as ue,a4 as H,q as M,a5 as O,m as _,r as N,h as f,n as t,b as W,I as u,N as xe,k,a as j,y as ce,l as w,c as z,z as de,a6 as se,A as fe,J as me,a7 as Ce,u as K,g as X,d as Z,B as he,K as Ve,L as Q,o as Ae,a3 as ae,f as Be,a2 as Se,v as je}from"../chunks/index.c1267f9a.js";import{t as Ie}from"../chunks/translations.1a06fbbc.js";import{l as oe,k as _e,t as ze,c as Le}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.3cf276ba.js";import{s as Pe}from"../chunks/supabase.1462ff8c.js";import"../chunks/navigation.b3b4bf49.js";import{p as $e}from"../chunks/stores.897b46c1.js";import{C as Me}from"../chunks/CopyBtn.7e0f475a.js";let Ne=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function Ue(n){let e,r,l,s,a,d;return{c(){e=H("svg"),r=H("title"),l=M("Help Circle"),s=H("path"),a=H("path"),d=H("circle"),this.h()},l(c){e=O(c,"svg",{xmlns:!0,class:!0,viewBox:!0,width:!0});var i=_(e);r=O(i,"title",{});var b=_(r);l=N(b,"Help Circle"),b.forEach(f),s=O(i,"path",{d:!0,fill:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-width":!0}),_(s).forEach(f),a=O(i,"path",{d:!0,fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-miterlimit":!0,"stroke-width":!0}),_(a).forEach(f),d=O(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),_(d).forEach(f),i.forEach(f),this.h()},h(){t(s,"d","M256 80a176 176 0 10176 176A176 176 0 00256 80z"),t(s,"fill","none"),t(s,"stroke","#CDD1D6"),t(s,"stroke-miterlimit","10"),t(s,"stroke-width","32"),t(a,"d","M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296"),t(a,"fill","none"),t(a,"stroke","#CDD1D6"),t(a,"stroke-linecap","round"),t(a,"stroke-miterlimit","10"),t(a,"stroke-width","28"),t(d,"cx","250"),t(d,"cy","348"),t(d,"r","20"),t(d,"fill","#CDD1D6"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"class","ionicon"),t(e,"viewBox","0 0 512 512"),t(e,"width",n[0])},m(c,i){W(c,e,i),u(e,r),u(r,l),u(e,s),u(e,a),u(e,d)},p(c,[i]){i&1&&t(e,"width",c[0])},i:xe,o:xe,d(c){c&&f(e)}}}function Re(n,e,r){let{width:l="24"}=e;return n.$$set=s=>{"width"in s&&r(0,l=s.width)},[l]}class Te extends ne{constructor(e){super(),ie(this,e,Re,Ue,ue,{width:0})}}function Fe(n){let e,r=n[1]("common.shorten")+"",l,s,a,d;return{c(){e=k("span"),l=M(r),s=j(),a=H("svg"),d=H("path"),this.h()},l(c){e=w(c,"SPAN",{class:!0});var i=_(e);l=N(i,r),i.forEach(f),s=z(c),a=O(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0,width:!0,height:!0});var b=_(a);d=O(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(d).forEach(f),b.forEach(f),this.h()},h(){t(e,"class","w-ful"),t(d,"stroke-linecap","round"),t(d,"stroke-linejoin","round"),t(d,"d","M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"),t(a,"xmlns","http://www.w3.org/2000/svg"),t(a,"fill","none"),t(a,"viewBox","0 0 24 24"),t(a,"stroke-width","1.5"),t(a,"stroke","currentColor"),t(a,"class","w- h-"),t(a,"width","20"),t(a,"height","20")},m(c,i){W(c,e,i),u(e,l),W(c,s,i),W(c,a,i),u(a,d)},p(c,i){i&2&&r!==(r=c[1]("common.shorten")+"")&&K(l,r)},d(c){c&&f(e),c&&f(s),c&&f(a)}}}function qe(n){let e,r,l,s=n[1]("common.long_url")+"",a,d,c,i,b,v,p,I=n[1]("common.short_key")+"",h,m,o,x,C,L,D,P,U,S,V,T,Y;D=new Te({});function ee(g,E){return Fe}let A=ee()(n);return{c(){e=k("form"),r=k("div"),l=k("label"),a=M(s),d=j(),c=k("input"),b=j(),v=k("div"),p=k("label"),h=M(I),m=j(),o=k("input"),C=j(),L=k("div"),ce(D.$$.fragment),P=j(),U=k("div"),S=k("button"),A.c(),this.h()},l(g){e=w(g,"FORM",{method:!0,action:!0,class:!0});var E=_(e);r=w(E,"DIV",{class:!0});var F=_(r);l=w(F,"LABEL",{for:!0,class:!0});var B=_(l);a=N(B,s),B.forEach(f),d=z(F),c=w(F,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),F.forEach(f),b=z(E),v=w(E,"DIV",{class:!0});var q=_(v);p=w(q,"LABEL",{for:!0,class:!0});var y=_(p);h=N(y,I),y.forEach(f),m=z(q),o=w(q,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,min:!0,class:!0}),C=z(q),L=w(q,"DIV",{class:!0,"data-tip":!0});var $=_(L);de(D.$$.fragment,$),$.forEach(f),q.forEach(f),P=z(E),U=w(E,"DIV",{class:!0});var R=_(U);S=w(R,"BUTTON",{type:!0,class:!0});var J=_(S);A.l(J),J.forEach(f),R.forEach(f),E.forEach(f),this.h()},h(){t(l,"for","long_url"),t(l,"class","text- text-xs mb-1 block"),t(c,"id","long_url"),t(c,"type","text"),t(c,"name","long_url"),c.required=!0,t(c,"placeholder",i=n[1]("common.long_url_placeholder")),t(c,"class","svelte-18nogjd"),t(r,"class","form-group w-full sm:w-6/12"),t(p,"for","key"),t(p,"class","text- text-xs mb-1 block"),t(o,"id","key"),t(o,"type","text"),t(o,"name","key"),t(o,"placeholder",x=n[1]("common.short_key_placeholder")),t(o,"min","6"),t(o,"class","svelte-18nogjd"),t(L,"class","tooltip tooltip-bottom tooltip-neutral absolute top-[35%] translate-y-[28%] right-[4px] cursor-pointer"),t(L,"data-tip","You can create a meaningful name for the short url if you don't like system generated key ðŸ˜‰"),t(v,"class","form-group relative w-full sm:w-4/12"),t(S,"type","submit"),t(S,"class","btn-submit bg-primary rounded-lg py-2 px-3 flex items-center justify-center gap-2 w-full hover:shadow-xl transition-all duration-200"),t(U,"class","btn-submit-wrapper w-full sm:w-2/12 flex justify-end self-end svelte-18nogjd"),t(e,"method","POST"),t(e,"action",""),t(e,"class","link-form max-[420px]:rounded-none flex-column bg-neutral/20 rounded-[8px] py-6 px-5 mt-[16px] flex flex-wrap justify-between items-middle gap-5 svelte-18nogjd")},m(g,E){W(g,e,E),u(e,r),u(r,l),u(l,a),u(r,d),u(r,c),se(c,n[0].long_url),u(e,b),u(e,v),u(v,p),u(p,h),u(v,m),u(v,o),se(o,n[0].key),u(v,C),u(v,L),fe(D,L,null),u(e,P),u(e,U),u(U,S),A.m(S,null),V=!0,T||(Y=[me(c,"input",n[3]),me(o,"input",n[4]),me(e,"submit",Ce(n[2]))],T=!0)},p(g,[E]){(!V||E&2)&&s!==(s=g[1]("common.long_url")+"")&&K(a,s),(!V||E&2&&i!==(i=g[1]("common.long_url_placeholder")))&&t(c,"placeholder",i),E&1&&c.value!==g[0].long_url&&se(c,g[0].long_url),(!V||E&2)&&I!==(I=g[1]("common.short_key")+"")&&K(h,I),(!V||E&2&&x!==(x=g[1]("common.short_key_placeholder")))&&t(o,"placeholder",x),E&1&&o.value!==g[0].key&&se(o,g[0].key),A.p(g,E)},i(g){V||(X(D.$$.fragment,g),V=!0)},o(g){Z(D.$$.fragment,g),V=!1},d(g){g&&f(e),he(D),A.d(),T=!1,Ve(Y)}}}function He(n,e,r){let l,s,a,d;Q(n,oe,o=>r(6,l=o)),Q(n,$e,o=>r(7,s=o)),Q(n,_e,o=>r(8,a=o)),Q(n,Ie,o=>r(1,d=o));let c={};const i={long_url:"",key:""},b=()=>{window.innerWidth<=420&&ae(_e,a=!0,a),window.innerWidth>420&&ae(_e,a=!1,a)},v=(o=6)=>r(0,i.key=Ne(o),i),p=o=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(o),I=async()=>{var o;if(p(i.long_url)){c={long_url:i.long_url,key:i.key===""?v():i.key,user_id:(o=s.data.user)==null?void 0:o.user.email};try{const{data:x,error:C}=await Pe.from("url_shortener_links").insert(c);if(console.log("inserted link row: ",x),C){console.log("error message: ",C.message);return}v(),r(0,i.long_url="",i),r(0,i.key="",i),ae(oe,l=[{...c,total_clicks:0,created_at:new Date().toLocaleDateString()},...l],l)}catch(x){console.log("error message: ",x)}}else{ze.push("Invalid URL",{theme:{"--toastBorderRadius":"8px","--toastBarBackground":"#FA193F","--toastMsgPadding":"0.5rem 1rem","--toastMinHeight":"3.0rem"}}),r(0,i.long_url="",i);return}};Ae(()=>{b(),window.addEventListener("resize",()=>{b()})});function h(){i.long_url=this.value,r(0,i)}function m(){i.key=this.value,r(0,i)}return[i,d,I,h,m]}class Oe extends ne{constructor(e){super(),ie(this,e,He,qe,ue,{})}}function We(n){let e,r=n[0].long_url.slice(0,20)+"...",l;return{c(){e=k("span"),l=M(r)},l(s){e=w(s,"SPAN",{});var a=_(e);l=N(a,r),a.forEach(f)},m(s,a){W(s,e,a),u(e,l)},p(s,a){a&1&&r!==(r=s[0].long_url.slice(0,20)+"...")&&K(l,r)},d(s){s&&f(e)}}}function Ke(n){let e,r=n[0].long_url.slice(0,30)+"...",l;return{c(){e=k("span"),l=M(r)},l(s){e=w(s,"SPAN",{});var a=_(e);l=N(a,r),a.forEach(f)},m(s,a){W(s,e,a),u(e,l)},p(s,a){a&1&&r!==(r=s[0].long_url.slice(0,30)+"...")&&K(l,r)},d(s){s&&f(e)}}}function Je(n){var q;let e,r,l,s,a,d=n[0].key+"",c,i,b,v,p,I,h,m,o,x=n[0].total_clicks+"",C,L,D,P,U,S,V,T=((q=n[0].created_at)==null?void 0:q.slice(0,10))+"",Y,ee,G,A,g;function E(y,$){return y[1]?Ke:We}let F=E(n),B=F(n);return A=new Me({props:{key:n[0].key}}),{c(){e=k("div"),r=k("div"),l=k("div"),s=k("a"),a=M("/"),c=M(d),b=j(),v=k("div"),B.c(),p=j(),I=k("div"),h=k("div"),m=k("div"),o=k("span"),C=M(x),L=j(),D=H("svg"),P=H("path"),U=j(),S=k("div"),V=k("span"),Y=M(T),ee=j(),G=k("div"),ce(A.$$.fragment),this.h()},l(y){e=w(y,"DIV",{class:!0});var $=_(e);r=w($,"DIV",{class:!0});var R=_(r);l=w(R,"DIV",{class:!0});var J=_(l);s=w(J,"A",{class:!0,href:!0});var pe=_(s);a=N(pe,"/"),c=N(pe,d),pe.forEach(f),J.forEach(f),b=z(R),v=w(R,"DIV",{class:!0});var ve=_(v);B.l(ve),ve.forEach(f),R.forEach(f),p=z($),I=w($,"DIV",{class:!0});var te=_(I);h=w(te,"DIV",{class:!0});var re=_(h);m=w(re,"DIV",{class:!0});var le=_(m);o=w(le,"SPAN",{class:!0});var ge=_(o);C=N(ge,x),ge.forEach(f),L=z(le),D=O(le,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var ke=_(D);P=O(ke,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(P).forEach(f),ke.forEach(f),le.forEach(f),U=z(re),S=w(re,"DIV",{});var we=_(S);V=w(we,"SPAN",{class:!0});var ye=_(V);Y=N(ye,T),ye.forEach(f),we.forEach(f),re.forEach(f),ee=z(te),G=w(te,"DIV",{class:!0});var be=_(G);de(A.$$.fragment,be),be.forEach(f),te.forEach(f),$.forEach(f),this.h()},h(){t(s,"class","text-[20px]"),t(s,"href",i=`/dashboard/${n[0].key}`),t(l,"class","cursor-pointer"),t(v,"class","text-sm sm:text-base"),t(r,"class","max-[420px]:w-full w-1/2"),t(o,"class","leading-none text-"),t(P,"stroke-linecap","round"),t(P,"stroke-linejoin","round"),t(P,"d","M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"),t(D,"xmlns","http://www.w3.org/2000/svg"),t(D,"fill","none"),t(D,"viewBox","0 0 24 24"),t(D,"stroke-width","1.5"),t(D,"stroke","currentColor"),t(D,"class","w-4 h-4 ml-2"),t(m,"class","flex max-[420px]:w-full"),t(V,"class","text-sm sm:text-base"),t(h,"class","flex flex-col items-end justify-center"),t(G,"class","mr-[10px]"),t(I,"class","relative max-[420px]:w-full w-1/2 flex justify-end"),t(e,"class","wrapper max-[420px]:rounded-none max-[420px]:p-[10px] max-[420px]:flex-col w-full bg-neutral/10 rounded-xl p-5 mb-5 flex justify-between items-center gap-5 hover:border-secondary/50 transition-all duration-200")},m(y,$){W(y,e,$),u(e,r),u(r,l),u(l,s),u(s,a),u(s,c),u(r,b),u(r,v),B.m(v,null),u(e,p),u(e,I),u(I,h),u(h,m),u(m,o),u(o,C),u(m,L),u(m,D),u(D,P),u(h,U),u(h,S),u(S,V),u(V,Y),u(I,ee),u(I,G),fe(A,G,null),g=!0},p(y,[$]){var J;(!g||$&1)&&d!==(d=y[0].key+"")&&K(c,d),(!g||$&1&&i!==(i=`/dashboard/${y[0].key}`))&&t(s,"href",i),F===(F=E(y))&&B?B.p(y,$):(B.d(1),B=F(y),B&&(B.c(),B.m(v,null))),(!g||$&1)&&x!==(x=y[0].total_clicks+"")&&K(C,x),(!g||$&1)&&T!==(T=((J=y[0].created_at)==null?void 0:J.slice(0,10))+"")&&K(Y,T);const R={};$&1&&(R.key=y[0].key),A.$set(R)},i(y){g||(X(A.$$.fragment,y),g=!0)},o(y){Z(A.$$.fragment,y),g=!1},d(y){y&&f(e),B.d(),he(A)}}}function Qe(n,e,r){let l;Q(n,Le,a=>r(1,l=a));let{link:s}=e;return n.$$set=a=>{"link"in a&&r(0,s=a.link)},[s,l]}class Ye extends ne{constructor(e){super(),ie(this,e,Qe,Je,ue,{link:0})}}function Ee(n,e,r){const l=n.slice();return l[3]=e[r],l}function De(n){let e,r;return e=new Ye({props:{link:n[3]}}),{c(){ce(e.$$.fragment)},l(l){de(e.$$.fragment,l)},m(l,s){fe(e,l,s),r=!0},p(l,s){const a={};s&1&&(a.link=l[3]),e.$set(a)},i(l){r||(X(e.$$.fragment,l),r=!0)},o(l){Z(e.$$.fragment,l),r=!1},d(l){he(e,l)}}}function Ge(n){let e,r,l=n[1]("common.dashboard")+"",s,a,d,c,i,b;d=new Oe({});let v=n[0],p=[];for(let h=0;h<v.length;h+=1)p[h]=De(Ee(n,v,h));const I=h=>Z(p[h],1,1,()=>{p[h]=null});return{c(){e=k("section"),r=k("h1"),s=M(l),a=j(),ce(d.$$.fragment),c=j(),i=k("div");for(let h=0;h<p.length;h+=1)p[h].c();this.h()},l(h){e=w(h,"SECTION",{class:!0});var m=_(e);r=w(m,"H1",{class:!0});var o=_(r);s=N(o,l),o.forEach(f),a=z(m),de(d.$$.fragment,m),c=z(m),i=w(m,"DIV",{class:!0});var x=_(i);for(let C=0;C<p.length;C+=1)p[C].l(x);x.forEach(f),m.forEach(f),this.h()},h(){t(r,"class","text-[22px] font-bold max-[410px]:px-[10px]"),t(i,"class","links-wrapper my-10"),t(e,"class","pt-28 mx- mx-auto bg-base-100")},m(h,m){W(h,e,m),u(e,r),u(r,s),u(e,a),fe(d,e,null),u(e,c),u(e,i);for(let o=0;o<p.length;o+=1)p[o].m(i,null);b=!0},p(h,[m]){if((!b||m&2)&&l!==(l=h[1]("common.dashboard")+"")&&K(s,l),m&1){v=h[0];let o;for(o=0;o<v.length;o+=1){const x=Ee(h,v,o);p[o]?(p[o].p(x,m),X(p[o],1)):(p[o]=De(x),p[o].c(),X(p[o],1),p[o].m(i,null))}for(je(),o=v.length;o<p.length;o+=1)I(o);Be()}},i(h){if(!b){X(d.$$.fragment,h);for(let m=0;m<v.length;m+=1)X(p[m]);b=!0}},o(h){Z(d.$$.fragment,h),p=p.filter(Boolean);for(let m=0;m<p.length;m+=1)Z(p[m]);b=!1},d(h){h&&f(e),he(d),Se(p,h)}}}function Xe(n,e,r){let l,s,a;return Q(n,$e,d=>r(2,l=d)),Q(n,oe,d=>r(0,s=d)),Q(n,Ie,d=>r(1,a=d)),n.$$.update=()=>{var d;n.$$.dirty&4&&(d=l.data)!=null&&d.links&&ae(oe,s=l.data.links,s)},[s,a,l]}class ot extends ne{constructor(e){super(),ie(this,e,Xe,Ge,ue,{})}}export{ot as default};
